# Migration `20200609151730-init`

This migration has been generated by Emile Fugulin at 6/9/2020, 3:17:30 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "AgeLimit" AS ENUM ('ALL', 'ABOVE_18', 'ABOVE_21');

CREATE TABLE "public"."Event" (
"addressId" text   ,"ageLimit" "AgeLimit" NOT NULL ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"description" text  NOT NULL ,"endsAt" timestamp(3)   ,"id" text  NOT NULL ,"name" text  NOT NULL ,"startsAt" timestamp(3)   ,"updatedAt" timestamp(3)  NOT NULL ,"venue" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Address" (
"city" text  NOT NULL ,"country" text  NOT NULL ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"line1" text  NOT NULL ,"line2" text   ,"state" text  NOT NULL ,"updatedAt" timestamp(3)  NOT NULL ,"zipCode" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "Event_addressId" ON "public"."Event"("addressId")

ALTER TABLE "public"."Event" ADD FOREIGN KEY ("addressId")REFERENCES "public"."Address"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200609151730-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,42 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+model Event {
+  id          String    @default(uuid()) @id
+  name        String
+  description String
+  venue       String
+  address     Address?  @relation(fields: [addressId], references: [id])
+  addressId   String?
+  startsAt    DateTime?
+  endsAt      DateTime?
+  ageLimit    AgeLimit
+  createdAt   DateTime  @default(now())
+  updatedAt   DateTime  @updatedAt
+}
+
+enum AgeLimit {
+  ALL
+  ABOVE_18
+  ABOVE_21
+}
+
+model Address {
+  id        String   @default(uuid()) @id
+  line1     String
+  line2     String?
+  city      String
+  state     String
+  country   String
+  zipCode   String
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  // Virtual relations
+  event     Event?
+}
```


